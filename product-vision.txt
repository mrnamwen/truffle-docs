About a year ago, I wrote an internal company tool called Truffle.

Truffle is an all-encompassing replacement for Laravel Shift and its associated deployer - or was at the time. It runs as an agent within a Proxmox (and soon to be vSphere) cluster, linking to its APIs. From there, it can manage the full VM lifecycle on behalf of the user - provisioning, IP management and reporting, deployments, command execution, service monitoring and control. It does this through a combination of user-customizable yaml templates and cli commands.

We have been using Truffle fully since 6 months ago for all of our applications. It allowed us to reduce the complexity of our application significantly - prior, it was a kubernetes application where builds would take 45 minutes as we had to compress the system down into multiple docker images. Now, builds take 3 minutes - only the items that need a build (e.g. Nuxt) are built, and the rest ran from flat files. While it means we lost the ability to instantly scale, truffle allowed us to build the system to its maximum capacity regardless. It also reduced operational overhead significantly as now the devops team did not need to maintain a Terraform installation or high-maintenance Kubernetes cluster. It has, in effect, become the backbone of our company and enabled us to ship software at a breakneck pace that hasn't been possible for years.

I have been given the okay to explore breaking off truffle into my own third-party commericial application for external users. I'm already undergoing a rewrite with it - cleaning up redundant code, creating a graphical web interface, making the VM lifecycle easier to understand, and adding vSphere support.

The deployment model is a mix of both - the primary control software would be a SaaS, but the user would install a minimal agent on their hardware. This would establish a local link to their hypervisor's API so they don't need to expose their internal infrastructure to the wider internet. This agent receives commands, template data, etc, and reports back cluster health and application service data.

The primary value proposition is to create a kubernetes-like management approach but without the drawbacks of containerization or the immense scaffolding required to maintain a k8s system. Users create application templates (or download them from a central market) and submit them to the agent for deployment. These templates have scaling values in them that let them set a min and max amount of that VM to create; we use this for Laravel Horizon as an example, where we have one Horizon template and use it to scale to 8 of the same node with the same application config. Truffle can also pull from either a base cloudinit disk OR a premade base image - so it would be possible to pass in the equivalent of a pod's docker image without actually needing to run a dockerized environment.
